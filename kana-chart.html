<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>平假名來源對照表</title>
  <style>
    body {
      background-color: #fff0f5;
      font-family: 'Hiragino Kaku Gothic ProN', 'Arial', sans-serif;
      text-align: center;
      padding: 2rem;
      color: #333;
    }
    h1 {
      color: #d26fa0;
      font-size: 2rem;
      margin-bottom: 1.5rem;
    }
    table {
      margin: auto;
      border-collapse: collapse;
      width: 95%;
      max-width: 750px;
      background: #fff;
      box-shadow: 0 0 12px #f3bcd3;
      border-radius: 12px;
      overflow: hidden;
    }
    th, td {
      border: 1px solid #ffd6e7;
      padding: 0.6rem;
      font-size: 1.1rem;
    }
    th {
      background-color: #ffe2ec;
      color: #d63384;
    }
    td:hover {
      background-color: #fff5f9;
      cursor: pointer;
    }
    .footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #999;
    }
    .home-link {
      display: inline-block;
      margin-top: 2rem;
      padding: 10px 20px;
      background-color: #ffaad4;
      color: white;
      text-decoration: none;
      border-radius: 30px;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: background-color 0.3s;
    }
    .home-link:hover {
      background-color: #f98fc3;
    }
  </style>
</head>
<body>
  <h1>🌸 平假名的漢字來源對照表</h1>

  <table id="kanaTable">
    <tr><th>萬葉假名（漢字）</th><th>平假名</th><th>片假名</th><th>羅馬拼音</th><th>中文音譯</th></tr>
    <tr><td>安</td><td>あ</td><td>ア</td><td>a</td><td>啊</td></tr>
    <tr><td>以</td><td>い</td><td>イ</td><td>i</td><td>咿</td></tr>
    <tr><td>宇</td><td>う</td><td>ウ</td><td>u</td><td>嗚</td></tr>
    <tr><td>衣</td><td>え</td><td>エ</td><td>e</td><td>欸</td></tr>
    <tr><td>於</td><td>お</td><td>オ</td><td>o</td><td>喔</td></tr>
    <tr><td>加</td><td>か</td><td>カ</td><td>ka</td><td>咖</td></tr>
    <tr><td>幾</td><td>き</td><td>キ</td><td>ki</td><td>奇</td></tr>
    <tr><td>久</td><td>く</td><td>ク</td><td>ku</td><td>哭</td></tr>
    <tr><td>計</td><td>け</td><td>ケ</td><td>ke</td><td>給</td></tr>
    <tr><td>己</td><td>こ</td><td>コ</td><td>ko</td><td>口</td></tr>
    <tr><td>左</td><td>さ</td><td>サ</td><td>sa</td><td>撒</td></tr>
    <tr><td>之</td><td>し</td><td>シ</td><td>shi</td><td>西</td></tr>
    <tr><td>寸</td><td>す</td><td>ス</td><td>su</td><td>速</td></tr>
    <tr><td>世</td><td>せ</td><td>セ</td><td>se</td><td>色</td></tr>
    <tr><td>曾</td><td>そ</td><td>ソ</td><td>so</td><td>索</td></tr>
    <tr><td>太</td><td>た</td><td>タ</td><td>ta</td><td>塔</td></tr>
    <tr><td>知</td><td>ち</td><td>チ</td><td>chi</td><td>起</td></tr>
    <tr><td>川</td><td>つ</td><td>ツ</td><td>tsu</td><td>刺</td></tr>
    <tr><td>天</td><td>て</td><td>テ</td><td>te</td><td>特</td></tr>
    <tr><td>止</td><td>と</td><td>ト</td><td>to</td><td>托</td></tr>
    <tr><td>奈</td><td>な</td><td>ナ</td><td>na</td><td>那</td></tr>
    <tr><td>仁</td><td>に</td><td>ニ</td><td>ni</td><td>你</td></tr>
    <tr><td>奴</td><td>ぬ</td><td>ヌ</td><td>nu</td><td>奴</td></tr>
    <tr><td>祢</td><td>ね</td><td>ネ</td><td>ne</td><td>內</td></tr>
    <tr><td>乃</td><td>の</td><td>ノ</td><td>no</td><td>諾</td></tr>
    <tr><td>波</td><td>は</td><td>ハ</td><td>ha</td><td>哈</td></tr>
    <tr><td>比</td><td>ひ</td><td>ヒ</td><td>hi</td><td>嘿</td></tr>
    <tr><td>不</td><td>ふ</td><td>フ</td><td>fu</td><td>呼</td></tr>
    <tr><td>部</td><td>へ</td><td>ヘ</td><td>he</td><td>黑</td></tr>
    <tr><td>保</td><td>ほ</td><td>ホ</td><td>ho</td><td>吼</td></tr>
    <tr><td>末</td><td>ま</td><td>マ</td><td>ma</td><td>媽</td></tr>
    <tr><td>美</td><td>み</td><td>ミ</td><td>mi</td><td>咪</td></tr>
    <tr><td>武</td><td>む</td><td>ム</td><td>mu</td><td>木</td></tr>
    <tr><td>女</td><td>め</td><td>メ</td><td>me</td><td>咩</td></tr>
    <tr><td>毛</td><td>も</td><td>モ</td><td>mo</td><td>摸</td></tr>
    <tr><td>也</td><td>や</td><td>ヤ</td><td>ya</td><td>呀</td></tr>
    <tr><td>由</td><td>ゆ</td><td>ユ</td><td>yu</td><td>優</td></tr>
    <tr><td>與</td><td>よ</td><td>ヨ</td><td>yo</td><td>唷</td></tr>
    <tr><td>良</td><td>ら</td><td>ラ</td><td>ra</td><td>啦</td></tr>
    <tr><td>利</td><td>り</td><td>リ</td><td>ri</td><td>哩</td></tr>
    <tr><td>留</td><td>る</td><td>ル</td><td>ru</td><td>嚕</td></tr>
    <tr><td>礼</td><td>れ</td><td>レ</td><td>re</td><td>咧</td></tr>
    <tr><td>呂</td><td>ろ</td><td>ロ</td><td>ro</td><td>囉</td></tr>
    <tr><td>和</td><td>わ</td><td>ワ</td><td>wa</td><td>哇</td></tr>
    <tr><td>遠</td><td>を</td><td>ヲ</td><td>wo</td><td>喔</td></tr>
    <tr><td>無</td><td>ん</td><td>ン</td><td>n</td><td>嗯</td></tr>
  </table>

  <a href="index.html" class="home-link">🏠 回首頁</a>

  <div class="footer">© 2025 Minna no Nihongo</div>

  <script>
  function speakKana(text) {
  speechSynthesis.cancel();

  // 💡 強制系統當作新內容（用不可見字元）
  const utterance = new SpeechSynthesisUtterance(text + String.fromCharCode(8203));
  utterance.lang = 'ja-JP';

  const voices = speechSynthesis.getVoices();
  const jpVoice = voices.find(v => v.lang === 'ja-JP');
  if (jpVoice) utterance.voice = jpVoice;

  speechSynthesis.speak(utterance);
}

  function bindKanaClicks() {
    document.querySelectorAll("#kanaTable tr").forEach(row => {
      const kanaCell = row.cells[1];
      if (kanaCell && kanaCell.textContent.trim()) {
        kanaCell.style.cursor = 'pointer';
        kanaCell.addEventListener("click", () => speakKana(kanaCell.textContent.trim()));
      }
    });
  }

  // 最穩定的語音載入與綁定方式
  if (typeof speechSynthesis !== 'undefined') {
    if (speechSynthesis.getVoices().length === 0) {
      speechSynthesis.onvoiceschanged = () => {
        bindKanaClicks();
      };
    } else {
      bindKanaClicks();
    }
  }
</script>

<!-- 🔈 測試朗讀 + 自動朗讀按鈕 -->
<div>
  <button onclick="speakKana('あ')" style="margin-top: 1.5rem; padding: 10px 20px; background-color: #ffc1d9; color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer;">
    🔈 測試朗讀「あ」
  </button>
  <button onclick="toggleAutoReading()" style="margin-left: 10px; margin-top: 1.5rem; padding: 10px 20px; background-color: #a4d4ff; color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer;">
    ▶️ 自動朗讀全部平假名
  </button>
</div>

<script>
  let autoReading = false;
  let autoReadIndex = 0;
  let autoReadTimeout;

  function startAutoReading() {
    const kanaCells = Array.from(document.querySelectorAll("#kanaTable tr td:nth-child(2)"));
    if (autoReadIndex < kanaCells.length) {
      const text = kanaCells[autoReadIndex].textContent.trim();
      if (text) speakKana(text);
      autoReadIndex++;
      autoReadTimeout = setTimeout(startAutoReading, 1200);
    } else {
      autoReading = false;
      autoReadIndex = 0;
      document.querySelector("button[onclick='toggleAutoReading()']").textContent = '▶️ 自動朗讀全部平假名';
    }
  }

  function toggleAutoReading() {
    if (!autoReading) {
      autoReading = true;
      autoReadIndex = 0;
      document.querySelector("button[onclick='toggleAutoReading()']").textContent = '⏹️ 停止朗讀';
      startAutoReading();
    } else {
      clearTimeout(autoReadTimeout);
      autoReading = false;
      autoReadIndex = 0;
      document.querySelector("button[onclick='toggleAutoReading()']").textContent = '▶️ 自動朗讀全部平假名';
    }
  }
</script>
</body>
</html>
