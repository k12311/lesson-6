<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>第10課：單字朗讀練習</title>
  <style>
    body { font-family:'Arial','Hiragino Kaku Gothic ProN','游ゴシック',sans-serif; background:#fff0f5; color:#333; padding:2rem; }
    header { display:grid; grid-template-columns: 1fr auto; gap:1rem; align-items:center; margin-bottom:.8rem; }
    h1 { color:#d26fa0; font-size:2rem; margin:0; }
    .controls{ display:flex; flex-wrap:wrap; gap:.6rem .8rem; align-items:center; justify-content:flex-end; }

    .pill,.seg{ background:#fff; border:1px solid #f0cde3; box-shadow:0 0 8px #e3a5c7; color:#c04583; }
    .pill{ display:inline-flex; align-items:center; gap:.6rem; border-radius:999px; padding:.4rem .8rem; font-size:.95rem; user-select:none; }

    .pill input[type="checkbox"]{ width:46px; height:24px; appearance:none; outline:none; background:#f8d8e9; border-radius:999px; position:relative; cursor:pointer; transition:background .2s; }
    .pill input[type="checkbox"]::after{ content:""; position:absolute; width:20px; height:20px; top:2px; left:2px; background:#fff; border-radius:50%; box-shadow:0 1px 4px rgba(0,0,0,.2); transition:left .2s; }
    .pill input[type="checkbox"]:checked{ background:#ffaad4; }
    .pill input[type="checkbox"]:checked::after{ left:24px; }

    .search input{ border:none; outline:none; background:transparent; min-width:12rem; color:#333; }

    .sliders label{ display:flex; align-items:center; gap:.4rem; }
    .sliders input[type="range"]{ width:120px; }

    .seg{ display:inline-flex; border-radius:999px; overflow:hidden; }
    .seg button{ border:none; background:transparent; padding:.45rem .9rem; cursor:pointer; color:#c04583; font-weight:600; }
    .seg button + button{ border-left:1px solid #f0cde3; }
    .seg button.active{ background:#ffaad4; color:#fff; }

    table{ width:100%; border-collapse:collapse; background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 0 12px #e3a5c7; margin-top:.6rem; }
    th,td{ padding:.8rem; text-align:left; border-bottom:1px solid #f0cde3; vertical-align:top; }
    th{ background:#f8d8e9; color:#c04583; }
    td.jp:hover{ cursor:pointer; background:#ffeaf5; }

    .hide-kana rt{ display:none; }
    ruby{ ruby-position:under; }

    .mode-cn .cn-col{ display:none; }
    .mode-jp .jp-col{ display:none; }

    .button-home{ margin-top:2rem; text-align:center; }
    .button-home a{ background:#ffaad4; color:#fff; padding:.8rem 1.5rem; text-decoration:none; border-radius:20px; font-weight:bold; box-shadow:0 4px 8px rgba(0,0,0,.1); }
    .button-home a:hover{ background:#f98fc3; }
  </style>
</head>
<body>
  <header>
    <h1>📘 第10課：單字＋例句朗讀練習</h1>
    <div class="controls">
      <label class="pill search" title="輸入以即時篩選（日/中皆可）">
        🔎 <input id="searchInput" type="text" placeholder="搜尋單字/意思/例句…">
      </label>

      <label class="pill" title="切換顯示/隱藏假名（ふりがな）">
        假名 <input id="kanaToggle" type="checkbox" />
      </label>

      <div class="pill sliders" title="調整朗讀速度與音量">
        <label>速度 <input id="rate" type="range" min="0.6" max="1.6" step="0.1" value="1"></label>
        <label>音量 <input id="volume" type="range" min="0" max="1" step="0.05" value="1"></label>
      </div>

      <div class="seg" id="modeSeg" role="tablist" aria-label="練習模式">
        <button type="button" data-mode="both" class="active" aria-selected="true">顯示全部</button>
        <button type="button" data-mode="cn"   aria-selected="false">日→中（隱中）</button>
        <button type="button" data-mode="jp"   aria-selected="false">中→日（隱日）</button>
      </div>
    </div>
  </header>

  <table id="vocabTable">
    <tr>
      <th class="jp-col">單字（日文）</th>
      <th class="cn-col">中文意思</th>
      <th class="jp-col">例句（日文）</th>
      <th class="cn-col">中文翻譯</th>
    </tr>

    <tr><td class="jp jp-col" onclick="speakJP('つくえの うえに ほんが あります。')">あります</td><td class="cn-col">有（物品）</td><td class="jp jp-col" onclick="speakJP('つくえの うえに ほんが あります。')"><ruby><rb>机</rb><rt>つくえ</rt></ruby>の <ruby><rb>上</rb><rt>うえ</rt></ruby>に <ruby><rb>本</rb><rt>ほん</rt></ruby>が あります。</td><td class="cn-col">桌上有書。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('へやに ねこが います。')">います</td><td class="cn-col">有（人・動物）</td><td class="jp jp-col" onclick="speakJP('へやに ねこが います。')"><ruby><rb>部屋</rb><rt>へや</rt></ruby>に <ruby><rb>猫</rb><rt>ねこ</rt></ruby>が います。</td><td class="cn-col">房間裡有一隻貓。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('いろいろな くだものが あります。')">いろいろ[な]</td><td class="cn-col">各式各樣</td><td class="jp jp-col" onclick="speakJP('いろいろな くだものが あります。')">いろいろな <ruby><rb>果物</rb><rt>くだもの</rt></ruby>が あります。</td><td class="cn-col">有各種水果。</td></tr>

    <tr><td class="jp jp-col" onclick="speakJP('あそこに おとこの ひとが います。')"><ruby><rb>男</rb><rt>おとこ</rt></ruby>の<ruby><rb>人</rb><rt>ひと</rt></ruby></td><td class="cn-col">男人</td><td class="jp jp-col" onclick="speakJP('あそこに おとこの ひとが います。')">あそこに <ruby><rb>男</rb><rt>おとこ</rt></ruby>の<ruby><rb>人</rb><rt>ひと</rt></ruby>が います。</td><td class="cn-col">那邊有個男人。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('レストランに おんなの ひとが います。')"><ruby><rb>女</rb><rt>おんな</rt></ruby>の<ruby><rb>人</rb><rt>ひと</rt></ruby></td><td class="cn-col">女人</td><td class="jp jp-col" onclick="speakJP('レストランに おんなの ひとが います。')">レストランに <ruby><rb>女</rb><rt>おんな</rt></ruby>の<ruby><rb>人</rb><rt>ひと</rt></ruby>が います。</td><td class="cn-col">餐廳裡有位女士。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('こうえんに おとこの こが います。')"><ruby><rb>男</rb><rt>おとこ</rt></ruby>の<ruby><rb>子</rb><rt>こ</rt></ruby></td><td class="cn-col">男孩</td><td class="jp jp-col" onclick="speakJP('こうえんに おとこの こが います。')"><ruby><rb>公園</rb><rt>こうえん</rt></ruby>に <ruby><rb>男</rb><rt>おとこ</rt></ruby>の<ruby><rb>子</rb><rt>こ</rt></ruby>が います。</td><td class="cn-col">公園裡有個男孩。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('おんなのこは かわいいです。')"><ruby><rb>女</rb><rt>おんな</rt></ruby>の<ruby><rb>子</rb><rt>こ</rt></ruby></td><td class="cn-col">女孩</td><td class="jp jp-col" onclick="speakJP('おんなのこは かわいいです。')"><ruby><rb>女</rb><rt>おんな</rt></ruby>の<ruby><rb>子</rb><rt>こ</rt></ruby>は かわいいです。</td><td class="cn-col">女孩很可愛。</td></tr>

    <tr><td class="jp jp-col" onclick="speakJP('いえに いぬが います。')"><ruby><rb>犬</rb><rt>いぬ</rt></ruby></td><td class="cn-col">狗</td><td class="jp jp-col" onclick="speakJP('いえに いぬが います。')"><ruby><rb>家</rb><rt>いえ</rt></ruby>に <ruby><rb>犬</rb><rt>いぬ</rt></ruby>が います。</td><td class="cn-col">家裡有一隻狗。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ねこが そとに います。')"><ruby><rb>猫</rb><rt>ねこ</rt></ruby></td><td class="cn-col">貓</td><td class="jp jp-col" onclick="speakJP('ねこが そとに います。')"><ruby><rb>猫</rb><rt>ねこ</rt></ruby>が <ruby><rb>外</rb><rt>そと</rt></ruby>に います。</td><td class="cn-col">貓在外面。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('どうぶつえんに ぱんだが います。')">パンダ</td><td class="cn-col">貓熊</td><td class="jp jp-col" onclick="speakJP('どうぶつえんに ぱんだが います。')"><ruby><rb>動物園</rb><rt>どうぶつえん</rt></ruby>に パンダが います。</td><td class="cn-col">動物園裡有熊貓。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ぞうは おおきいです。')"><ruby><rb>象</rb><rt>ぞう</rt></ruby></td><td class="cn-col">大象</td><td class="jp jp-col" onclick="speakJP('ぞうは おおきいです。')"><ruby><rb>象</rb><rt>ぞう</rt></ruby>は おおきいです。</td><td class="cn-col">大象很大。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('にわに きが あります。')"><ruby><rb>木</rb><rt>き</rt></ruby></td><td class="cn-col">樹木</td><td class="jp jp-col" onclick="speakJP('にわに きが あります。')"><ruby><rb>庭</rb><rt>にわ</rt></ruby>に <ruby><rb>木</rb><rt>き</rt></ruby>が あります。</td><td class="cn-col">院子裡有樹。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('たくさんの ものが あります。')"><ruby><rb>物</rb><rt>もの</rt></ruby></td><td class="cn-col">東西</td><td class="jp jp-col" onclick="speakJP('たくさんの ものが あります。')">たくさんの <ruby><rb>物</rb><rt>もの</rt></ruby>が あります。</td><td class="cn-col">有很多東西。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('でんちが ありません。')"><ruby><rb>電池</rb><rt>でんち</rt></ruby></td><td class="cn-col">電池</td><td class="jp jp-col" onclick="speakJP('でんちが ありません。')"><ruby><rb>電池</rb><rt>でんち</rt></ruby>が ありません。</td><td class="cn-col">沒有電池了。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('はこの なかに なにが ありますか。')"><ruby><rb>箱</rb><rt>はこ</rt></ruby></td><td class="cn-col">箱子</td><td class="jp jp-col" onclick="speakJP('はこの なかに なにが ありますか。')"><ruby><rb>箱</rb><rt>はこ</rt></ruby>の <ruby><rb>中</rb><rt>なか</rt></ruby>に なにが ありますか。</td><td class="cn-col">箱子裡有什麼？</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('でんきを つける すいっちです。')">スイッチ</td><td class="cn-col">開關</td><td class="jp jp-col" onclick="speakJP('でんきを つける すいっちです。')"><ruby><rb>電気</rb><rt>でんき</rt></ruby>を つける スイッチです。</td><td class="cn-col">是開燈的開關。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('れいぞうこに たべものが あります。')"><ruby><rb>冷蔵庫</rb><rt>れいぞうこ</rt></ruby></td><td class="cn-col">冰箱</td><td class="jp jp-col" onclick="speakJP('れいぞうこに たべものが あります。')"><ruby><rb>冷蔵庫</rb><rt>れいぞうこ</rt></ruby>に <ruby><rb>食べ物</rb><rt>たべもの</rt></ruby>が あります。</td><td class="cn-col">冰箱裡有食物。</td></tr>

    <tr><td class="jp jp-col" onclick="speakJP('てーぶるの うえに ざっしが あります。')">テーブル</td><td class="cn-col">餐桌、桌子</td><td class="jp jp-col" onclick="speakJP('てーぶるの うえに ざっしが あります。')">テーブルの <ruby><rb>上</rb><rt>うえ</rt></ruby>に <ruby><rb>雑誌</rb><rt>ざっし</rt></ruby>が あります。</td><td class="cn-col">桌上有雜誌。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('べっどで ねます。')">ベッド</td><td class="cn-col">床</td><td class="jp jp-col" onclick="speakJP('べっどで ねます。')">ベッドで ねます。</td><td class="cn-col">在床上睡覺。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('たなの なかに ほんが あります。')"><ruby><rb>棚</rb><rt>たな</rt></ruby></td><td class="cn-col">架子</td><td class="jp jp-col" onclick="speakJP('たなの なかに ほんが あります。')"><ruby><rb>棚</rb><rt>たな</rt></ruby>の <ruby><rb>中</rb><rt>なか</rt></ruby>に <ruby><rb>本</rb><rt>ほん</rt></ruby>が あります。</td><td class="cn-col">架子裡有書。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('どあを しめてください。')">ドア</td><td class="cn-col">門</td><td class="jp jp-col" onclick="speakJP('どあを しめてください。')">ドアを <ruby><rb>閉</rb><rt>し</rt></ruby>めて ください。</td><td class="cn-col">請把門關上。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('まどを あけます。')"><ruby><rb>窓</rb><rt>まど</rt></ruby></td><td class="cn-col">窗戶</td><td class="jp jp-col" onclick="speakJP('まどを あけます。')"><ruby><rb>窓</rb><rt>まど</rt></ruby>を <ruby><rb>開</rb><rt>あ</rt></ruby>けます。</td><td class="cn-col">打開窗戶。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ぽすとに てがみを いれます。')">ポスト</td><td class="cn-col">郵筒、信箱</td><td class="jp jp-col" onclick="speakJP('ぽすとに てがみを いれます。')">ポストに <ruby><rb>手紙</rb><rt>てがみ</rt></ruby>を いれます。</td><td class="cn-col">把信放進郵筒。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('あの びるは とても たかいです。')">ビル</td><td class="cn-col">大樓</td><td class="jp jp-col" onclick="speakJP('あの びるは とても たかいです。')">あの ビルは とても <ruby><rb>高</rb><rt>たか</rt></ruby>いです。</td><td class="cn-col">那棟大樓很高。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('こんびにに えーてぃーえむが あります。')">エーティーエム（ATM）</td><td class="cn-col">自動提款機</td><td class="jp jp-col" onclick="speakJP('こんびにに えーてぃーえむが あります。')">コンビニに ATMが あります。</td><td class="cn-col">超商裡有提款機。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('まいにち こんびにに いきます。')">コンビニ</td><td class="cn-col">便利商店</td><td class="jp jp-col" onclick="speakJP('まいにち こんびにに いきます。')"><ruby><rb>毎日</rb><rt>まいにち</rt></ruby> コンビニに <ruby><rb>行</rb><rt>い</rt></ruby>きます。</td><td class="cn-col">每天去便利商店。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('こうえんで さんぽします。')"><ruby><rb>公園</rb><rt>こうえん</rt></ruby></td><td class="cn-col">公園</td><td class="jp jp-col" onclick="speakJP('こうえんで さんぽします。')"><ruby><rb>公園</rb><rt>こうえん</rt></ruby>で <ruby><rb>散歩</rb><rt>さんぽ</rt></ruby>します。</td><td class="cn-col">在公園散步。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('きっさてんで こーひーを のみます。')"><ruby><rb>喫茶店</rb><rt>きっさてん</rt></ruby></td><td class="cn-col">咖啡店</td><td class="jp jp-col" onclick="speakJP('きっさてんで こーひーを のみます。')"><ruby><rb>喫茶店</rb><rt>きっさてん</rt></ruby>で コーヒーを のみます。</td><td class="cn-col">在咖啡店喝咖啡。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ぱんやで ぱんを かいます。')">〜<ruby><rb>屋</rb><rt>や</rt></ruby></td><td class="cn-col">〜店</td><td class="jp jp-col" onclick="speakJP('ぱんやで ぱんを かいます。')">パン<ruby><rb>屋</rb><rt>や</rt></ruby>で パンを <ruby><rb>買</rb><rt>か</rt></ruby>います。</td><td class="cn-col">在麵包店買麵包。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('たくしー のりばは どこですか。')"><ruby><rb>乗</rb><rt>の</rt></ruby>り<ruby><rb>場</rb><rt>ば</rt></ruby></td><td class="cn-col">乘車處</td><td class="jp jp-col" onclick="speakJP('たくしー のりばは どこですか。')">タクシー<ruby><rb>乗り場</rb><rt>のりば</rt></ruby>は どこですか。</td><td class="cn-col">請問計程車搭乘處在哪？</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('かながわけんに すんでいます。')"><ruby><rb>県</rb><rt>けん</rt></ruby></td><td class="cn-col">縣</td><td class="jp jp-col" onclick="speakJP('かながわけんに すんでいます。')">かながわ<ruby><rb>県</rb><rt>けん</rt></ruby>に <ruby><rb>住</rb><rt>す</rt></ruby>んでいます。</td><td class="cn-col">住在神奈川縣。</td></tr>

    <tr><td class="jp jp-col" onclick="speakJP('ほんは てーぶるの うえに あります。')"><ruby><rb>上</rb><rt>うえ</rt></ruby></td><td class="cn-col">上</td><td class="jp jp-col" onclick="speakJP('ほんは てーぶるの うえに あります。')"><ruby><rb>本</rb><rt>ほん</rt></ruby>は テーブルの <ruby><rb>上</rb><rt>うえ</rt></ruby>に あります。</td><td class="cn-col">書在桌上。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('つくえの したに いぬが います。')"><ruby><rb>下</rb><rt>した</rt></ruby></td><td class="cn-col">下</td><td class="jp jp-col" onclick="speakJP('つくえの したに いぬが います。')"><ruby><rb>机</rb><rt>つくえ</rt></ruby>の <ruby><rb>下</rb><rt>した</rt></ruby>に <ruby><rb>犬</rb><rt>いぬ</rt></ruby>が います。</td><td class="cn-col">桌子下有隻狗。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('すーぱーの まえに ばすていが あります。')"><ruby><rb>前</rb><rt>まえ</rt></ruby></td><td class="cn-col">前</td><td class="jp jp-col" onclick="speakJP('すーぱーの まえに ばすていが あります。')">スーパーの <ruby><rb>前</rb><rt>まえ</rt></ruby>に <ruby><rb>バス停</rb><rt>ばすてい</rt></ruby>が あります。</td><td class="cn-col">超市前有公車站。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('がっこうの うしろに こうえんが あります。')"><ruby><rb>後</rb><rt>うし</rt></ruby>ろ</td><td class="cn-col">後</td><td class="jp jp-col" onclick="speakJP('がっこうの うしろに こうえんが あります。')"><ruby><rb>学校</rb><rt>がっこう</rt></ruby>の <ruby><rb>後</rb><rt>うし</rt></ruby>ろに <ruby><rb>公園</rb><rt>こうえん</rt></ruby>が あります。</td><td class="cn-col">學校後面有公園。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('みぎに まがってください。')"><ruby><rb>右</rb><rt>みぎ</rt></ruby></td><td class="cn-col">右</td><td class="jp jp-col" onclick="speakJP('みぎに まがってください。')"><ruby><rb>右</rb><rt>みぎ</rt></ruby>に まがって ください。</td><td class="cn-col">請向右轉。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ひだりに ぱんやが あります。')"><ruby><rb>左</rb><rt>ひだり</rt></ruby></td><td class="cn-col">左</td><td class="jp jp-col" onclick="speakJP('ひだりに ぱんやが あります。')"><ruby><rb>左</rb><rt>ひだり</rt></ruby>に パン<ruby><rb>屋</rb><rt>や</rt></ruby>が あります。</td><td class="cn-col">左邊有麵包店。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('はこの なかに ぼーるが あります。')"><ruby><rb>中</rb><rt>なか</rt></ruby></td><td class="cn-col">裡面、中間</td><td class="jp jp-col" onclick="speakJP('はこの なかに ぼーるが あります。')"><ruby><rb>箱</rb><rt>はこ</rt></ruby>の <ruby><rb>中</rb><rt>なか</rt></ruby>に ボールが あります。</td><td class="cn-col">箱子裡有球。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('そとに くるまが あります。')"><ruby><rb>外</rb><rt>そと</rt></ruby></td><td class="cn-col">外面</td><td class="jp jp-col" onclick="speakJP('そとに くるまが あります。')"><ruby><rb>外</rb><rt>そと</rt></ruby>に くるまが あります。</td><td class="cn-col">外面有車。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('わたしの となりに たなかさんが います。')"><ruby><rb>隣</rb><rt>となり</rt></ruby></td><td class="cn-col">旁邊</td><td class="jp jp-col" onclick="speakJP('わたしの となりに たなかさんが います。')">わたしの <ruby><rb>隣</rb><rt>となり</rt></ruby>に たなかさんが います。</td><td class="cn-col">田中先生坐我旁邊。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('えきの ちかくに こんびにが あります。')"><ruby><rb>近</rb><rt>ちか</rt></ruby>く</td><td class="cn-col">附近</td><td class="jp jp-col" onclick="speakJP('えきの ちかくに こんびにが あります。')"><ruby><rb>駅</rb><rt>えき</rt></ruby>の <ruby><rb>近</rb><rt>ちか</rt></ruby>くに コンビニが あります。</td><td class="cn-col">車站附近有便利商店。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ぎんこうと ゆうびんきょくの あいだに みせが あります。')"><ruby><rb>間</rb><rt>あいだ</rt></ruby></td><td class="cn-col">之間</td><td class="jp jp-col" onclick="speakJP('ぎんこうと ゆうびんきょくの あいだに みせが あります。')"><ruby><rb>銀行</rb><rt>ぎんこう</rt></ruby>と <ruby><rb>郵便局</rb><rt>ゆうびんきょく</rt></ruby>の <ruby><rb>間</rb><rt>あいだ</rt></ruby>に みせが あります。</td><td class="cn-col">銀行和郵局之間有家店。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('つくえの うえに ほんや ざっし などが あります。')">〜や〜[<ruby><rb>等</rb><rt>など</rt></ruby>]</td><td class="cn-col">～和～等</td><td class="jp jp-col" onclick="speakJP('つくえの うえに ほんや ざっし などが あります。')"><ruby><rb>机</rb><rt>つくえ</rt></ruby>の <ruby><rb>上</rb><rt>うえ</rt></ruby>に <ruby><rb>本</rb><rt>ほん</rt></ruby>や <ruby><rb>雑誌</rb><rt>ざっし</rt></ruby>［<ruby><rb>等</rb><rt>など</rt></ruby>］が あります。</td><td class="cn-col">桌上有書、雜誌等等。</td></tr>
  </table>

  <div class="button-home">
    <a href="index.html">回首頁 🏠</a>
  </div>

  <script>
    let voicesLoaded = false;
    const KANA_KEY = 'showKana';
    const RATE_KEY = 'ttsRate';
    const VOL_KEY  = 'ttsVolume';
    const MODE_KEY = 'practiceMode';

    function getRate(){ const r=parseFloat(localStorage.getItem(RATE_KEY) ?? '1'); return isNaN(r)?1:r; }
    function getVolume(){ const v=parseFloat(localStorage.getItem(VOL_KEY) ?? '1'); return isNaN(v)?1:v; }

    function speakJP(text){
      if(!voicesLoaded){
        window.speechSynthesis.onvoiceschanged = ()=>{ voicesLoaded = true; speakJP(text); };
        speechSynthesis.getVoices(); return;
      }
      speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'ja-JP';
      u.rate = getRate();
      u.volume = getVolume();
      const v = speechSynthesis.getVoices().find(v=>v.lang==='ja-JP');
      if(v) u.voice = v;
      speechSynthesis.speak(u);
    }

    function applyKanaPreference(show){
      document.body.classList.toggle('hide-kana', !show);
      const t=document.getElementById('kanaToggle'); if(t) t.checked = show;
    }

    function applyPracticeMode(mode){
      document.body.classList.remove('mode-cn','mode-jp');
      if(mode==='cn') document.body.classList.add('mode-cn');
      if(mode==='jp') document.body.classList.add('mode-jp');
      document.querySelectorAll('#modeSeg button').forEach(btn=>{
        const active = btn.dataset.mode===mode;
        btn.classList.toggle('active', active);
        btn.setAttribute('aria-selected', String(active));
      });
    }

    function setupSearch(){
      const input = document.getElementById('searchInput');
      const rows = Array.from(document.querySelectorAll('#vocabTable tr')).slice(1);
      input.addEventListener('input', ()=>{
        const q = input.value.trim().toLowerCase();
        rows.forEach(tr=>{
          const hit = tr.textContent.toLowerCase().includes(q);
          tr.style.display = hit ? '' : 'none';
        });
      });
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      const check = ()=>{
        if(speechSynthesis.getVoices().length>0){ voicesLoaded=true; }
        else setTimeout(check, 120);
      }; check();

      const saved = localStorage.getItem(KANA_KEY);
      const initial = saved===null ? true : saved==='true';
      applyKanaPreference(initial);
      document.getElementById('kanaToggle').addEventListener('change', e=>{
        const show = e.target.checked;
        applyKanaPreference(show);
        localStorage.setItem(KANA_KEY, String(show));
      });

      const rateEl = document.getElementById('rate');
      const volEl  = document.getElementById('volume');
      rateEl.value = String(getRate());
      volEl.value  = String(getVolume());
      rateEl.addEventListener('input', ()=>localStorage.setItem(RATE_KEY, rateEl.value));
      volEl.addEventListener('input',  ()=>localStorage.setItem(VOL_KEY,  volEl.value));

      const savedMode = localStorage.getItem(MODE_KEY) ?? 'both';
      applyPracticeMode(savedMode);
      document.querySelectorAll('#modeSeg button').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const mode = btn.dataset.mode;
          applyPracticeMode(mode);
          localStorage.setItem(MODE_KEY, mode);
        });
      });

      setupSearch();
    });
  </script>
</body>
</html>
