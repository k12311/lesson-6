<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>第5課：單字朗讀練習（課本順序）</title>
  <style>
    body { font-family: 'Arial','Hiragino Kaku Gothic ProN',sans-serif; background:#fff0f5; color:#333; padding:2rem; }
    header { display:grid; grid-template-columns: 1fr auto; gap:1rem; align-items:center; margin-bottom:.8rem; }
    h1 { color:#d26fa0; font-size:2rem; margin:0; }
    .controls { display:flex; flex-wrap:wrap; gap:.6rem .8rem; justify-content:flex-end; align-items:center; }
    .pill,.seg { background:#fff; border:1px solid #f0cde3; box-shadow:0 0 8px #e3a5c7; color:#c04583; }
    .pill { display:inline-flex; align-items:center; gap:.5rem; border-radius:999px; padding:.35rem .7rem; font-size:.9rem; user-select:none; }
    .pill input[type="checkbox"]{ width:46px; height:24px; appearance:none; outline:none; background:#f8d8e9; border-radius:999px; position:relative; cursor:pointer; transition:background .2s; }
    .pill input[type="checkbox"]::after{ content:""; position:absolute; width:20px; height:20px; top:2px; left:2px; background:#fff; border-radius:50%; box-shadow:0 1px 4px rgba(0,0,0,.2); transition:left .2s; }
    .pill input[type="checkbox"]:checked{ background:#ffaad4; }
    .pill input[type="checkbox"]:checked::after{ left:24px; }
    .search { border-radius:999px; padding:.4rem .8rem; display:inline-flex; align-items:center; gap:.5rem; }
    .search input { border:none; outline:none; background:transparent; min-width:12rem; color:#333; }
    .sliders { display:inline-flex; gap:.8rem; align-items:center; flex-wrap:wrap; border-radius:999px; padding:.4rem .8rem; font-size:.9rem; }
    .sliders label{ display:flex; align-items:center; gap:.4rem; }
    .sliders input[type="range"]{ width:120px; }
    .seg{ display:inline-flex; border-radius:999px; overflow:hidden; }
    .seg button{ border:none; background:transparent; padding:.45rem .9rem; cursor:pointer; color:#c04583; font-weight:600; }
    .seg button+button{ border-left:1px solid #f0cde3; }
    .seg button.active{ background:#ffaad4; color:#fff; }
    table{ width:100%; border-collapse:collapse; background:#fff; border-radius:12px; overflow:hidden; box-shadow:0 0 12px #e3a5c7; margin-top:.6rem; }
    th,td{ padding:.8rem; text-align:left; border-bottom:1px solid #f0cde3; vertical-align:top; }
    th{ background:#f8d8e9; color:#c04583; }
    td.jp:hover{ cursor:pointer; background:#ffeaf5; }
    .hide-kana rt{ display:none; }
    .mode-cn .cn-col{ display:none; } /* 日→中（隱中文） */
    .mode-jp .jp-col{ display:none; } /* 中→日（隱日文） */
    .button-home{ margin-top:2rem; text-align:center; }
    .button-home a{ background:#ffaad4; color:#fff; padding:.8rem 1.5rem; text-decoration:none; border-radius:20px; font-weight:bold; box-shadow:0 4px 8px rgba(0,0,0,.1); }
    .button-home a:hover{ background:#f98fc3; }
    ruby{ ruby-position:under; }
  </style>
</head>
<body>
  <header>
    <h1>📘 第5課：單字＋例句朗讀練習（依課本順序）</h1>
    <div class="controls">
      <label class="search pill" title="輸入以即時篩選（日/中皆可）">
        🔎 <input id="searchInput" type="text" placeholder="搜尋單字/意思/例句…" />
      </label>
      <label class="pill" title="切換顯示/隱藏假名（ふりがな）">假名
        <input id="kanaToggle" type="checkbox" />
      </label>
      <div class="sliders pill" title="調整朗讀速度與音量（會記住偏好）">
        <label>速度 <input id="rate" type="range" min="0.6" max="1.6" step="0.1" value="1"></label>
        <label>音量 <input id="volume" type="range" min="0" max="1" step="0.05" value="1"></label>
      </div>
      <div class="seg" id="modeSeg" role="tablist" aria-label="練習模式">
        <button type="button" data-mode="both" class="active" aria-selected="true">顯示全部</button>
        <button type="button" data-mode="cn" aria-selected="false">日→中（隱中文）</button>
        <button type="button" data-mode="jp" aria-selected="false">中→日（隱日文）</button>
      </div>
    </div>
  </header>

  <table id="vocabTable">
    <tr>
      <th class="jp-col">單字（日文）</th>
      <th class="cn-col">中文意思（依課本）</th>
      <th class="jp-col">例句（日文）</th>
      <th class="cn-col">中文翻譯</th>
    </tr>

    <!-- 交通・移動など -->
    <tr><td class="jp jp-col" onclick="speakJP('いきます')">いきます（<ruby><rb>行</rb><rt>い</rt></ruby>きます）</td><td class="cn-col">去</td><td class="jp jp-col" onclick="speakJP('わたしは きょうとへ いきます。')">わたしは きょうとへ いきます。</td><td class="cn-col">我去京都。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('きます')">きます（<ruby><rb>来</rb><rt>き</rt></ruby>ます）</td><td class="cn-col">來</td><td class="jp jp-col" onclick="speakJP('ともだちは うちへ きます。')">ともだちは うちへ きます。</td><td class="cn-col">朋友來我家。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('かえります')">かえります（<ruby><rb>帰</rb><rt>かえ</rt></ruby>ります）</td><td class="cn-col">回</td><td class="jp jp-col" onclick="speakJP('よる うちへ かえります。')">よる うちへ かえります。</td><td class="cn-col">晚上回家。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('がっこう')"><ruby><rb>学校</rb><rt>がっこう</rt></ruby></td><td class="cn-col">學校</td><td class="jp jp-col" onclick="speakJP('まいにち がっこうへ いきます。')">まいにち <ruby><rb>学校</rb><rt>がっこう</rt></ruby>へ いきます。</td><td class="cn-col">每天去學校。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('スーパー')">スーパー</td><td class="cn-col">超市</td><td class="jp jp-col" onclick="speakJP('スーパーで たべものを かいます。')">スーパーで たべものを かいます。</td><td class="cn-col">在超市買食物。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('えき')"><ruby><rb>駅</rb><rt>えき</rt></ruby></td><td class="cn-col">車站</td><td class="jp jp-col" onclick="speakJP('えきで ともだちを まちます。')"><ruby><rb>駅</rb><rt>えき</rt></ruby>で ともだちを まちます。</td><td class="cn-col">在車站等朋友。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ひこうき')"><ruby><rb>飛行機</rb><rt>ひこうき</rt></ruby></td><td class="cn-col">飛機</td><td class="jp jp-col" onclick="speakJP('ひこうきで おおさかへ いきます。')"><ruby><rb>飛行機</rb><rt>ひこうき</rt></ruby>で おおさかへ いきます。</td><td class="cn-col">搭飛機去大阪。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ふね')"><ruby><rb>船</rb><rt>ふね</rt></ruby></td><td class="cn-col">船</td><td class="jp jp-col" onclick="speakJP('ふねで しまへ いきます。')"><ruby><rb>船</rb><rt>ふね</rt></ruby>で しまへ いきます。</td><td class="cn-col">搭船去島上。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('でんしゃ')"><ruby><rb>電車</rb><rt>でんしゃ</rt></ruby></td><td class="cn-col">電車</td><td class="jp jp-col" onclick="speakJP('でんしゃで とうきょうへ いきます。')"><ruby><rb>電車</rb><rt>でんしゃ</rt></ruby>で とうきょうへ いきます。</td><td class="cn-col">搭電車去東京。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ちかてつ')"><ruby><rb>地下鉄</rb><rt>ちかてつ</rt></ruby></td><td class="cn-col">地下鐵</td><td class="jp jp-col" onclick="speakJP('ちかてつで かいしゃへ いきます。')"><ruby><rb>地下鉄</rb><rt>ちかてつ</rt></ruby>で かいしゃへ いきます。</td><td class="cn-col">搭地下鐵去公司。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('しんかんせん')"><ruby><rb>新幹線</rb><rt>しんかんせん</rt></ruby></td><td class="cn-col">新幹線</td><td class="jp jp-col" onclick="speakJP('しんかんせんで なごやへ いきます。')"><ruby><rb>新幹線</rb><rt>しんかんせん</rt></ruby>で なごやへ いきます。</td><td class="cn-col">搭新幹線去名古屋。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('バス')">バス</td><td class="cn-col">公車、巴士</td><td class="jp jp-col" onclick="speakJP('バスで うちへ かえります。')">バスで うちへ かえります。</td><td class="cn-col">搭公車回家。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('タクシー')">タクシー</td><td class="cn-col">計程車</td><td class="jp jp-col" onclick="speakJP('タクシーで ホテルへ いきます。')">タクシーで ホテルへ いきます。</td><td class="cn-col">搭計程車去飯店。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('じてんしゃ')"><ruby><rb>自転車</rb><rt>じてんしゃ</rt></ruby></td><td class="cn-col">自行車、腳踏車</td><td class="jp jp-col" onclick="speakJP('じてんしゃで がっこうへ いきます。')"><ruby><rb>自転車</rb><rt>じてんしゃ</rt></ruby>で <ruby><rb>学校</rb><rt>がっこう</rt></ruby>へ いきます。</td><td class="cn-col">騎腳踏車去學校。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('あるいて')"><ruby><rb>歩</rb><rt>ある</rt></ruby>いて</td><td class="cn-col">步行</td><td class="jp jp-col" onclick="speakJP('あるいて えきへ いきます。')"><ruby><rb>歩</rb><rt>ある</rt></ruby>いて <ruby><rb>駅</rb><rt>えき</rt></ruby>へ いきます。</td><td class="cn-col">走路去車站。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ひと')"><ruby><rb>人</rb><rt>ひと</rt></ruby></td><td class="cn-col">人</td><td class="jp jp-col" onclick="speakJP('あの ひとは かいしゃいんです。')">あの <ruby><rb>人</rb><rt>ひと</rt></ruby>は <ruby><rb>会社員</rb><rt>かいしゃいん</rt></ruby>です。</td><td class="cn-col">那個人是公司職員。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ともだち')"><ruby><rb>友達</rb><rt>ともだち</rt></ruby></td><td class="cn-col">朋友</td><td class="jp jp-col" onclick="speakJP('ともだちと きょうとへ いきます。')"><ruby><rb>友達</rb><rt>ともだち</rt></ruby>と きょうとへ いきます。</td><td class="cn-col">和朋友一起去京都。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('かれ')"><ruby><rb>彼</rb><rt>かれ</rt></ruby></td><td class="cn-col">他、男朋友</td><td class="jp jp-col" onclick="speakJP('かれは アメリカから きました。')"><ruby><rb>彼</rb><rt>かれ</rt></ruby>は アメリカから きました。</td><td class="cn-col">他是從美國來的。</td></tr>

    <!-- 彼女／家族 -->
    <tr><td class="jp jp-col" onclick="speakJP('かのじょ')"><ruby><rb>彼女</rb><rt>かのじょ</rt></ruby></td><td class="cn-col">她、女朋友</td><td class="jp jp-col" onclick="speakJP('かのじょは せんせいです。')"><ruby><rb>彼女</rb><rt>かのじょ</rt></ruby>は せんせいです。</td><td class="cn-col">她是老師。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('かぞく')"><ruby><rb>家族</rb><rt>かぞく</rt></ruby></td><td class="cn-col">家人、家屬</td><td class="jp jp-col" onclick="speakJP('かぞくと にほんへ いきます。')"><ruby><rb>家族</rb><rt>かぞく</rt></ruby>と <ruby><rb>日本</rb><rt>にほん</rt></ruby>へ いきます。</td><td class="cn-col">和家人一起去日本。</td></tr>

    <!-- 時間詞（週／月／年） -->
    <tr><td class="jp jp-col" onclick="speakJP('ひとりで')"><ruby><rb>一人</rb><rt>ひとり</rt></ruby>で</td><td class="cn-col">一個人、自己</td><td class="jp jp-col" onclick="speakJP('ひとりで びじゅつかんへ いきます。')"><ruby><rb>一人</rb><rt>ひとり</rt></ruby>で <ruby><rb>美術館</rb><rt>びじゅつかん</rt></ruby>へ いきます。</td><td class="cn-col">一個人去美術館。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('せんしゅう')"><ruby><rb>先週</rb><rt>せんしゅう</rt></ruby></td><td class="cn-col">上週、上星期</td><td class="jp jp-col" onclick="speakJP('せんしゅう きょうとへ いきました。')"><ruby><rb>先週</rb><rt>せんしゅう</rt></ruby> きょうとへ いきました。</td><td class="cn-col">上週去了京都。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('こんしゅう')"><ruby><rb>今週</rb><rt>こんしゅう</rt></ruby></td><td class="cn-col">本週、這星期</td><td class="jp jp-col" onclick="speakJP('こんしゅう とうきょうへ いきます。')"><ruby><rb>今週</rb><rt>こんしゅう</rt></ruby> とうきょうへ いきます。</td><td class="cn-col">這星期要去東京。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('らいしゅう')"><ruby><rb>来週</rb><rt>らいしゅう</rt></ruby></td><td class="cn-col">下週、下星期</td><td class="jp jp-col" onclick="speakJP('らいしゅう しんかんせんで なごやへ いきます。')"><ruby><rb>来週</rb><rt>らいしゅう</rt></ruby> <ruby><rb>新幹線</rb><rt>しんかんせん</rt></ruby>で なごやへ いきます。</td><td class="cn-col">下星期搭新幹線去名古屋。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('せんげつ')"><ruby><rb>先月</rb><rt>せんげつ</rt></ruby></td><td class="cn-col">上個月</td><td class="jp jp-col" onclick="speakJP('せんげつ ちゅうごくへ いきました。')"><ruby><rb>先月</rb><rt>せんげつ</rt></ruby> <ruby><rb>中国</rb><rt>ちゅうごく</rt></ruby>へ いきました。</td><td class="cn-col">上個月去了中國。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('こんげつ')"><ruby><rb>今月</rb><rt>こんげつ</rt></ruby></td><td class="cn-col">這個月</td><td class="jp jp-col" onclick="speakJP('こんげつ ははの たんじょうびです。')"><ruby><rb>今月</rb><rt>こんげつ</rt></ruby> ははの <ruby><rb>誕生日</rb><rt>たんじょうび</rt></ruby>です。</td><td class="cn-col">這個月是我媽媽的生日。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('らいげつ')"><ruby><rb>来月</rb><rt>らいげつ</rt></ruby></td><td class="cn-col">下個月</td><td class="jp jp-col" onclick="speakJP('らいげつ にほんへ いきます。')"><ruby><rb>来月</rb><rt>らいげつ</rt></ruby> <ruby><rb>日本</rb><rt>にほん</rt></ruby>へ いきます。</td><td class="cn-col">下個月去日本。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('きょねん')"><ruby><rb>去年</rb><rt>きょねん</rt></ruby></td><td class="cn-col">去年</td><td class="jp jp-col" onclick="speakJP('きょねん はたらきました。')"><ruby><rb>去年</rb><rt>きょねん</rt></ruby> <ruby><rb>働</rb><rt>はたら</rt></ruby>きました。</td><td class="cn-col">去年工作了。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ことし')"><ruby><rb>今年</rb><rt>ことし</rt></ruby></td><td class="cn-col">今年</td><td class="jp jp-col" onclick="speakJP('ことし にほんごを べんきょうします。')"><ruby><rb>今年</rb><rt>ことし</rt></ruby> <ruby><rb>日本語</rb><rt>にほんご</rt></ruby>を <ruby><rb>勉強</rb><rt>べんきょう</rt></ruby>します。</td><td class="cn-col">今年學日文。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('らいねん')"><ruby><rb>来年</rb><rt>らいねん</rt></ruby></td><td class="cn-col">明年</td><td class="jp jp-col" onclick="speakJP('らいねん にほんへ りょこうします。')"><ruby><rb>来年</rb><rt>らいねん</rt></ruby> <ruby><rb>日本</rb><rt>にほん</rt></ruby>へ りょこうします。</td><td class="cn-col">明年去日本旅行。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('…ねん')">…<ruby><rb>年</rb><rt>ねん</rt></ruby></td><td class="cn-col">…年</td><td class="jp jp-col" onclick="speakJP('2025ねんです。')">2025<ruby><rb>年</rb><rt>ねん</rt></ruby>です。</td><td class="cn-col">是2025年。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('なんねん')"><ruby><rb>何年</rb><rt>なんねん</rt></ruby></td><td class="cn-col">幾年</td><td class="jp jp-col" onclick="speakJP('いまは なんねんですか。')"><ruby><rb>今</rb><rt>いま</rt></ruby>は <ruby><rb>何年</rb><rt>なんねん</rt></ruby>ですか。</td><td class="cn-col">現在是幾年？</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('…がつ')">…<ruby><rb>月</rb><rt>がつ</rt></ruby></td><td class="cn-col">…月</td><td class="jp jp-col" onclick="speakJP('しちがつです。')">しち<ruby><rb>月</rb><rt>がつ</rt></ruby>です。</td><td class="cn-col">是七月。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('なんがつ')"><ruby><rb>何月</rb><rt>なんがつ</rt></ruby></td><td class="cn-col">幾月</td><td class="jp jp-col" onclick="speakJP('いまは なんがつですか。')"><ruby><rb>今</rb><rt>いま</rt></ruby>は <ruby><rb>何月</rb><rt>なんがつ</rt></ruby>ですか。</td><td class="cn-col">現在是幾月？</td></tr>

    <!-- 日期（1～10、14、20、24；以及通用…日／何日） -->
    <tr><td class="jp jp-col" onclick="speakJP('ついたち')">ついたち（1<ruby><rb>日</rb><rt>にち</rt></ruby>）</td><td class="cn-col">1號</td><td class="jp jp-col" onclick="speakJP('きょうは ついたちです。')">きょうは ついたちです。</td><td class="cn-col">今天是1號。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ふつか')">ふつか（2<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">2號、兩天</td><td class="jp jp-col" onclick="speakJP('しめきりは ふつかです。')">しめきりは ふつかです。</td><td class="cn-col">截止日是2號。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('みっか')">みっか（3<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">3號、三天</td><td class="jp jp-col" onclick="speakJP('やすみは みっか つづきます。')">やすみは みっか つづきます。</td><td class="cn-col">放假持續三天。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('よっか')">よっか（4<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">4號、四天</td><td class="jp jp-col" onclick="speakJP('よっかに しゅっぱつします。')">よっかに しゅっぱつします。</td><td class="cn-col">四號出發。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('いつか')">いつか（5<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">5號、五天</td><td class="jp jp-col" onclick="speakJP('パーティーは いつかです。')">パーティーは いつかです。</td><td class="cn-col">派對在五號。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('むいか')">むいか（6<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">6號、六天</td><td class="jp jp-col" onclick="speakJP('むいか まえに かえりました。')">むいか まえに かえりました。</td><td class="cn-col">六天前回來了。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('なのか')">なのか（7<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">7號、七天</td><td class="jp jp-col" onclick="speakJP('なのかまで にゅうりょくしてください。')">なのかまで にゅうりょくしてください。</td><td class="cn-col">請在七號前輸入。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ようか')">ようか（8<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">8號、八天</td><td class="jp jp-col" onclick="speakJP('りょこうは ようか です。')">りょこうは ようか です。</td><td class="cn-col">旅行八天。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ここのか')">ここのか（9<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">9號、九天</td><td class="jp jp-col" onclick="speakJP('ここのかに しけんが あります。')">ここのかに しけんが あります。</td><td class="cn-col">九號有考試。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('とおか')">とおか（10<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">10號、十天</td><td class="jp jp-col" onclick="speakJP('とおか いないに おくってください。')">とおか いないに おくってください。</td><td class="cn-col">請在十天內寄出。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('じゅうよっか')">じゅうよっか（14<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">14號、十四天</td><td class="jp jp-col" onclick="speakJP('じゅうよっかに あいます。')">じゅうよっかに あいます。</td><td class="cn-col">十四號見面。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('はつか')">はつか（20<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">20號、二十天</td><td class="jp jp-col" onclick="speakJP('はつかに きゅうけいします。')">はつかに きゅうけいします。</td><td class="cn-col">二十號休息。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('にじゅうよっか')">にじゅうよっか（24<ruby><rb>日</rb><rt>か</rt></ruby>）</td><td class="cn-col">24號、二十四天</td><td class="jp jp-col" onclick="speakJP('にじゅうよっかは にちようびです。')">にじゅうよっかは にちようびです。</td><td class="cn-col">24號是星期天。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('…にち')">…<ruby><rb>日</rb><rt>にち</rt></ruby></td><td class="cn-col">…號、…天</td><td class="jp jp-col" onclick="speakJP('しめきりは じゅうごにちです。')">しめきりは じゅうごにちです。</td><td class="cn-col">截止是15號。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('なんにち')"><ruby><rb>何日</rb><rt>なんにち</rt></ruby></td><td class="cn-col">幾號、幾天</td><td class="jp jp-col" onclick="speakJP('しけんは なんにちですか。')"><ruby><rb>試験</rb><rt>しけん</rt></ruby>は <ruby><rb>何日</rb><rt>なんにち</rt></ruby>ですか。</td><td class="cn-col">考試是幾號？</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('いつ')">いつ</td><td class="cn-col">什麼時候</td><td class="jp jp-col" onclick="speakJP('たんじょうびは いつですか。')"><ruby><rb>誕生日</rb><rt>たんじょうび</rt></ruby>は いつですか。</td><td class="cn-col">你生日是什麼時候？</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('たんじょうび')"><ruby><rb>誕生日</rb><rt>たんじょうび</rt></ruby></td><td class="cn-col">生日</td><td class="jp jp-col" onclick="speakJP('わたしの たんじょうびは しちがつです。')">わたしの <ruby><rb>誕生日</rb><rt>たんじょうび</rt></ruby>は しちがつです。</td><td class="cn-col">我的生日是七月。</td></tr>

    <!-- 會話表現・鐵道 -->
    <tr><td class="jp jp-col" onclick="speakJP('どうも ありがとうございました。')">[どうも] <ruby><rb>ありがとう</rb><rt></rt></ruby>ございました。</td><td class="cn-col">非常感謝。</td><td class="jp jp-col" onclick="speakJP('どうも ありがとうございました。')">どうも ありがとうございました。</td><td class="cn-col">非常感謝。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('どういたしまして。')">どういたしまして。</td><td class="cn-col">不客氣。</td><td class="jp jp-col" onclick="speakJP('どういたしまして。')">どういたしまして。</td><td class="cn-col">不客氣。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('…ばんせん')">…<ruby><rb>番線</rb><rt>ばんせん</rt></ruby></td><td class="cn-col">第…號月臺</td><td class="jp jp-col" onclick="speakJP('つぎは 3ばんせんです。')">つぎは 3<ruby><rb>番線</rb><rt>ばんせん</rt></ruby>です。</td><td class="cn-col">下一班在3號月台。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('つぎの')"><ruby><rb>次</rb><rt>つぎ</rt></ruby>の</td><td class="cn-col">下一個、下一班</td><td class="jp jp-col" onclick="speakJP('つぎの でんしゃは なんじですか。')"><ruby><rb>次</rb><rt>つぎ</rt></ruby>の <ruby><rb>電車</rb><rt>でんしゃ</rt></ruby>は なんじですか。</td><td class="cn-col">下一班電車是幾點？</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('ふつう')"><ruby><rb>普通</rb><rt>ふつう</rt></ruby></td><td class="cn-col">普通車</td><td class="jp jp-col" onclick="speakJP('ふつうで いきます。')"><ruby><rb>普通</rb><rt>ふつう</rt></ruby>で いきます。</td><td class="cn-col">搭普通車去。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('きゅうこう')"><ruby><rb>急行</rb><rt>きゅうこう</rt></ruby></td><td class="cn-col">快車</td><td class="jp jp-col" onclick="speakJP('きゅうこうで なごやへ いきます。')"><ruby><rb>急行</rb><rt>きゅうこう</rt></ruby>で なごやへ いきます。</td><td class="cn-col">搭快車去名古屋。</td></tr>
    <tr><td class="jp jp-col" onclick="speakJP('とっきゅう')"><ruby><rb>特急</rb><rt>とっきゅう</rt></ruby></td><td class="cn-col">特快車</td><td class="jp jp-col" onclick="speakJP('とっきゅうは はやいです。')"><ruby><rb>特急</rb><rt>とっきゅう</rt></ruby>は はやいです。</td><td class="cn-col">特快車很快。</td></tr>
  </table>

  <div class="button-home">
    <a href="index.html">回首頁 🏠</a>
  </div>

  <script>
    let voicesLoaded = false;

    // 偏好鍵（沿用全站 TTS；練習模式為第5課獨立）
    const KANA_KEY = 'showKana';
    const RATE_KEY = 'ttsRate';
    const VOL_KEY  = 'ttsVolume';
    const MODE_KEY = 'practiceMode5';

    function getRate(){ const r=parseFloat(localStorage.getItem(RATE_KEY) ?? '1'); return isNaN(r)?1:r; }
    function getVolume(){ const v=parseFloat(localStorage.getItem(VOL_KEY) ?? '1'); return isNaN(v)?1:v; }

    function speakJP(text){
      if(!voicesLoaded){
        window.speechSynthesis.onvoiceschanged = ()=>{ voicesLoaded = true; speakJP(text); };
        speechSynthesis.getVoices(); return;
      }
      speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = 'ja-JP';
      u.rate = getRate();
      u.volume = getVolume();
      const v = speechSynthesis.getVoices().find(voice => voice.lang==='ja-JP');
      if(v) u.voice = v;
      speechSynthesis.speak(u);
    }

    function applyKanaPreference(show){
      document.body.classList.toggle('hide-kana', !show);
      const t=document.getElementById('kanaToggle'); if(t) t.checked = show;
    }

    function applyPracticeMode(mode){
      document.body.classList.remove('mode-cn','mode-jp');
      if(mode==='cn') document.body.classList.add('mode-cn');
      if(mode==='jp') document.body.classList.add('mode-jp');
      document.querySelectorAll('#modeSeg button').forEach(btn=>{
        const active = btn.dataset.mode===mode;
        btn.classList.toggle('active', active);
        btn.setAttribute('aria-selected', String(active));
      });
    }

    function setupSearch(){
      const input = document.getElementById('searchInput');
      const rows = Array.from(document.querySelectorAll('#vocabTable tr')).slice(1);
      input.addEventListener('input', ()=>{
        const q = input.value.trim().toLowerCase();
        rows.forEach(tr=>{
          const hit = tr.textContent.toLowerCase().includes(q);
          tr.style.display = hit ? '' : 'none';
        });
      });
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      // 語音初始化
      const check = () => {
        if(speechSynthesis.getVoices().length>0){ voicesLoaded=true; }
        else setTimeout(check,120);
      };
      check();

      // 假名偏好
      const savedKana = localStorage.getItem(KANA_KEY);
      const showKana = savedKana===null ? true : savedKana==='true';
      applyKanaPreference(showKana);
      document.getElementById('kanaToggle').addEventListener('change', e=>{
        const show = e.target.checked;
        applyKanaPreference(show);
        localStorage.setItem(KANA_KEY, String(show));
      });

      // TTS 偏好
      const rateEl = document.getElementById('rate');
      const volEl  = document.getElementById('volume');
      rateEl.value = String(getRate());
      volEl.value  = String(getVolume());
      rateEl.addEventListener('input', ()=> localStorage.setItem(RATE_KEY, rateEl.value));
      volEl.addEventListener('input',  ()=> localStorage.setItem(VOL_KEY,  volEl.value));

      // 練習模式
      const savedMode = localStorage.getItem(MODE_KEY) ?? 'both';
      applyPracticeMode(savedMode);
      document.querySelectorAll('#modeSeg button').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const mode = btn.dataset.mode;
          applyPracticeMode(mode);
          localStorage.setItem(MODE_KEY, mode);
        });
      });

      // 搜尋
      setupSearch();
    });
  </script>
</body>
</html>
